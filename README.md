<!--
    以下の問いに答え、計画書を完成させよ。
    あまり悩まないで、今自分の頭に「明確に」あることだけを書こう。
-->
# bird-mat-calc

トレース可能で有理数を扱える、CLIで動作する単純な行列計算機。

The simple matrix calculator on CLI, traceable,  treating rational numbers.

このアプリケーションは私がRustの練習するために作られた個人用のアプリケーションです。

I created this application to practice Rust.

# installation

- 次の方法によりソースファイルをダウンロードして下さい。
  - `git clone`を行う
  - このページの上部にある`<> Code`を選択し、そこから"Download ZIP"を選択する。
- その後、Rustの`cargo`を用いてビルドして下さい。
  - Cargoがダウンロードされていなければ、以下のドキュメントをもとにダウンロードすると良いでしょう。
    - https://doc.rust-jp.rs/book-ja/ch01-01-installation.html#%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB
    - https://www.rust-lang.org/ja/tools/install
  - ダウンロードしたフォルダのディレクトリで`cargo build --release`を走らせると、`./target/release`内に`bird-mat-calc`というバイナリファイルができているはずです。

# How to use

```
Usage: bird-mat-calc [OPTIONS] <COMMAND>
```
このアプリケーションでは、標準入力から行列を受け取って、標準出力から計算結果を返します。
全ての列要素は空白区切りによって与え、改行を行うことで次の行への入力に切り替えられます。
空行を開けることで、次の行列への入力に切り替えたり、入力を終了することができます。
事前に行列サイズを与える必要はありません。

掃き出し法を使う手法においては、`[OPTION]`部に`-v`または`--verbose`オプションを付け加えておくと、
**その掃き出しの過程を出力します**。

- `mul`: 二つの行列を受け取り、それの行列積を計算します。もしも行列積が定義できなければエラーを返します。
- `sweep`: 掃き出し法によって行列を掃き出します。これを活用すると有理数の形で連立一次方程式の解を得ることができます。
- `sweep`: 掃き出し法によって逆行列を求めます。**正則でない行列に対してはエラーを返します。**
- `help`: ヘルプを表示します。


# 動作の様子

## 逆行列の掃き出し法によるトレース付き計算
```
> bird-mat-calc -v inverse
To finish entering one matrix, enter an empty line.
Enter A >>
3 1 2
-1 2 5
1 5 1/5

->
    1   1/3   2/3   1/3     0     0
   -0   7/3  17/3   1/3     1     0
    0  14/3 -7/15  -1/3     0     1

->
    1     0  -1/7   2/7  -1/7     0
   -0     1  17/7   1/7   3/7     0
    0     0 -59/5    -1    -2     1

->
    1     0    -0 123/413 -7/59 -5/413
   -0     1     0 -26/413  1/59 85/413
    0     0     1  5/59 10/59 -5/59

123/413 -7/59 -5/413
-26/413  1/59 85/413
 5/59 10/59 -5/59
```
## 行列の積
```
> bird-mat-calc mul
To finish entering one matrix, enter an empty line.
Enter A >>
3 1 2
-1 2 5
1 5 1/5

Enter B (its row should be 3.) >>
123/413 -7/59 -5/413
-26/413  1/59 85/413
 5/59 10/59 -5/59

    1     0     0
    0     1     0
    0     0     1
```

```
> bird-mat-calc mul
To finish entering one matrix, enter an empty line.
Enter A >>
123/413 -7/59 -5/413
-26/413  1/59 85/413
 5/59 10/59 -5/59

Enter B (its row should be 3.) >>
3 1 2
-1 2 5
1 5 1/5

    1     0     0
    0     1     0
    0     0     1
```

# 0.要約 -- abstract

大学の課題で行列を計算するのがどうしてもめんどくさかったのと、
研究室の先輩が「自分でプログラムを打ち込んで計算機を作った」と言っていたことを思い出し
じゃあ自力で作ってみるかとなって行列計算アプリを作ってみた。

結果として、CLIからほどほどに触りやすいものができた。
パフォーマンスはあまり良くないが、一応正しく計算はできる。
有利数ベースで行列を計算しているため、計算誤差は生じにくい。

# 1. モチベーション -- motivation
<!-- そのプロジェクトを完成させないとどのような不利益があるか？ -->
### (1)Where: モチベーションが生じた場所や日時は何か？
- 2023/11/23 16:59:46

### (2)Objective: 本来の目的は何か？
- 大学の課題

### (3)Trouble: 目的を達成するに当たって面倒臭いこと・困ったことは何か？
- 行列の計算するのが面倒臭い

### (4)Thought: どう思ったか？
- せっかくなので行列計算をするツールを自作しようかと思った

# 2. 手法 -- methodology
### (1) 手法を簡単に説明せよ。
- Fractionを使って精度を保ったまま行列を計算する

### (2) 利益は何か。
- ローカルで直接行列を気軽に計算できるようになる。

# 3. 技術的困難 -- difficulties
<!--
    学習が必要な物
  1. 今まで一度もその言語とフレームワークの組み合わせでプロダクトを作ったことがない物
  2. 当分前に(3年前)触れた技術であり、基礎文法について学習が必要である。
-->
- Rustで開発すること(まだ慣れていない)

# 4. 手順 -- Procedure
<!-- 開発までの手順を説明する。基本2層以内で分割する -->
- Rustでの開発を行う。
  - メンテナンスが楽(機能の拡張が楽)
  - バグが起きづらい。
  - FractionクラスがCargoパッケージとしてすでにある。
  - clapなどのCLIに関するツールがまとまっている。

# 5. 学んだ技術
- モジュール・ファイル分割(`super`, `Rust2018`方式)
- `map`と`collect`
- `clap`におけるサブコマンドの取り扱い方
- 有理数(`Fraction`)の取り扱い方
- 所有権の取扱
- (演算子オーバーロード)
- 人間にとって読みやすいエラー出力
  - `logger`(`env-logger`)の取り扱い方